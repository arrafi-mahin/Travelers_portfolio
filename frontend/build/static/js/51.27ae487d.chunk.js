"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[51],{4622:function(e,t,a){a.r(t);var n=a(4165),r=a(5861),i=a(9439),s=a(2791),l=a(3975),d=a(4301),u=a(9806),c=a(7118),o=a(4619),p=a(7689),v=a(5573),f=a(8822),x=a(1551),m=a(7035),h=(a(3625),a(184));t.default=function(e){var t=(0,s.useContext)(o.V),a=(0,m.x)(),g=a.isLoading,j=a.sendRequest,Z=a.error,P=a.clearError,b=(0,x.c)({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:null,isValid:!1}},!1),k=(0,i.Z)(b,2),C=k[0],w=k[1],y=(0,p.s0)(),E=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(a){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,(r=new FormData).append("title",C.inputs.title.value),r.append("description",C.inputs.description.value),r.append("address",C.inputs.address.value),r.append("image",C.inputs.image.value),e.next=9,j("http://localhost:5000/api/places/","POST",r,{authorization:"Bearer "+t.token});case 9:y("/"),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return(0,h.jsxs)(s.Fragment,{children:[(0,h.jsx)(v.Z,{error:Z,onClear:P}),(0,h.jsxs)("form",{className:"place-form",onSubmit:E,children:[g&&(0,h.jsx)(f.Z,{asOverlay:!0}),(0,h.jsx)(l.Z,{id:"title",element:"input",type:"text",label:"title",validators:[(0,c.hg)()],errorText:"Please Enter a valid Title.",onInput:w}),(0,h.jsx)(l.Z,{id:"description",element:"textarea",label:"description",validators:[(0,c.CP)(5)],errorText:"Please Enter a valid description (Minimum 5 charecter).",onInput:w}),(0,h.jsx)(l.Z,{id:"address",element:"input",label:"Address",validators:[(0,c.hg)()],errorText:"Please Enter a valid Address.",onInput:w}),(0,h.jsx)(u.Z,{id:"image",onInput:w,errorText:"Please Provide an image."}),(0,h.jsx)(d.Z,{type:"submit",disabled:!C.isValid,children:"ADD PLACE"})]})]})}},9806:function(e,t,a){a.d(t,{Z:function(){return l}});var n=a(9439),r=a(2791),i=a(4301),s=a(184);var l=function(e){var t=(0,r.useState)(),a=(0,n.Z)(t,2),l=a[0],d=a[1],u=(0,r.useState)(),c=(0,n.Z)(u,2),o=c[0],p=c[1],v=(0,r.useState)(!1),f=(0,n.Z)(v,2),x=f[0],m=f[1],h=(0,r.useRef)();return(0,r.useEffect)((function(){if(l){var e=new FileReader;e.onload=function(){p(e.result)},e.readAsDataURL(l)}}),[l]),(0,s.jsxs)("div",{className:"form-control",children:[(0,s.jsx)("input",{type:"file",id:e.id,ref:h,style:{display:"none"},accept:".jpg,.png,.jpeg",onChange:function(t){var a,n=x;t.target.files&&1===t.target.files.length?(a=t.target.files[0],d(a),m(!0),n=!0):(m(!1),n=!1),e.onInput(e.id,a,n)}}),(0,s.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[(0,s.jsxs)("div",{className:"image-upload__preview",children:[o&&(0,s.jsx)("img",{src:o,alt:"Preview"}),!o&&(0,s.jsx)("p",{children:"Please pick an image."})]}),(0,s.jsx)(i.Z,{type:"button",onClick:function(){h.current.click()},children:"PICK IMAGE"})]}),!x&&(0,s.jsxs)("p",{children:[" ",e.errorText]})]})}},3625:function(){}}]);
//# sourceMappingURL=51.27ae487d.chunk.js.map